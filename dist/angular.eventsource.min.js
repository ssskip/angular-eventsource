!function(e,n){"use strict";function t(e,n,t,r,o){function i(e,n){n=n||{},this.url=e,this.onErrorListeners=[],this.onMessageListeners=[],this.onOpenListeners=[],this.$$new()}i.prototype={_readyStateConstants:{CONNECTING:0,OPEN:1,CLOSED:2},$$new:function(){this.eventSource&&this.eventSource.readyState===this._readyStateConstants.OPEN||(this.eventSource=r.newEventSource(this.url),o.info("New EventSource created! Publish url:"+this.url),this.eventSource.onopen=this._onOpen.bind(this),this.eventSource.onerror=this._onError.bind(this),this.eventSource.onmessage=this._onMessage.bind(this))},_onError:function(e){o.warn("EventSource object trigger error event!",e);for(var n=0;n<this.onErrorListeners;n++)this.onErrorListeners[n].call(this,e)},_onOpen:function(){for(var e=0;e<this.onErrorListeners;e++)this.onOpenListeners[e].call(this)},_onMessage:function(e){for(var n=new s(e),t=0;t<this.onErrorListeners;t++)this.onMessageListeners[t].call(this,n)},onError:function(e){return this.onErrorListeners.push(e),this},onOpen:function(e){return this.onOpenListeners.push(e),this},onMessage:function(e){return this.onMessageListeners.push(e),this}}}function r(){this.newEventSource=function(e,n){var t=!!n.withCredentials;return this.isEventSource?this.EventSource(e,t):void 0}}function s(e){var n={event:"",data:"",id:"",retry:"-1"};return i(n,e)}{var o=(n.isArray,n.isObject),i=n.extend,o=(n.isString,n.isObject);n.fromJson,n.$$minErr("$eventSource")}t.$inject=["$rootScope","$q","$timeout","$$eventSourceBackend","$log"],r.prototype={EventSource:e.EventSource,isEventSource:o(e.EventSource)},n.module("ngEventSource",[]).factory("$eventSource",t).service("$$eventSourceBackend",r)}(window,window.angular);
//# sourceMappingURL=angular.eventsource.min.js.map